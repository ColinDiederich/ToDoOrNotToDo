@import "tailwindcss";

/* ==========================================================================
   DESIGN TOKENS & CSS CUSTOM PROPERTIES
   ========================================================================== */
:root {
  /* Typography Scale */
  --font-primary: 'Varela Round', cursive;
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
  --font-size-4xl: 2.25rem;
  
  /* Font Weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-black: 900;
  
  /* Color Palette */
  --color-primary-50: #faf5ff;
  --color-primary-100: #f3e8ff;
  --color-primary-200: #e9d5ff;
  --color-primary-300: #d8b4fe;
  --color-primary-400: #c084fc;
  --color-primary-500: #a855f7;
  --color-primary-600: #9333ea;
  --color-primary-700: #7c3aed;
  --color-primary-800: #6b21a8;
  --color-primary-900: #581c87;
  
  /* Semantic Colors */
  --color-text-primary: #1f2937;
  --color-text-secondary: #6b7280;
  --color-text-disabled: #9ca3af;
  --color-text-inverse: #ffffff;
  
  /* Background Colors */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f9fafb;
  --color-bg-accent: rgba(168, 85, 247, 0.3);
  --color-bg-overlay: rgba(0, 0, 0, 0.75);
  
  /* Border Colors */
  --color-border-primary: #e5e7eb;
  --color-border-accent: #d8b4fe;
  --color-border-focus: #a855f7;
  
  /* Spacing Scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-12: 3rem;
  --space-16: 4rem;
  
  /* Border Radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  
  /* Transitions */
  --transition-fast: 150ms ease-out;
  --transition-normal: 200ms ease-out;
  --transition-slow: 300ms ease-out;
  --transition-bounce: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  
  /* Z-Index Scale */
  --z-dropdown: 50;
  --z-modal: 100;
  --z-tooltip: 200;
  --z-toast: 300;
}

/* ==========================================================================
   COMPONENT LAYER - ORGANIZED BY FUNCTIONAL AREAS
   ========================================================================== */
@layer components {
  
  /* ========================================================================
     TYPOGRAPHY SYSTEM
     ======================================================================== */
  .font-primary {
    font-family: var(--font-primary);
  }
  
  /* Text Styles - Keeping original class names for compatibility */
  .text-title {
    @apply text-4xl font-black text-gray-800 select-none;
    font-family: var(--font-primary);
    letter-spacing: -0.025em;
    caret-color: transparent;
  }
  
  .text-task {
    @apply text-xl font-semibold text-gray-800;
    font-family: var(--font-primary);
  }
  
  .text-task-completed {
    @apply text-xl font-semibold line-through text-gray-500;
    font-family: var(--font-primary);
  }
  
  .text-task-active {
    @apply text-xl font-semibold text-gray-800;
    font-family: var(--font-primary);
  }
  
  .text-task-disabled {
    @apply text-xl font-semibold text-gray-400;
    font-family: var(--font-primary);
  }
  
  .text-no-tasks {
    @apply text-gray-600 text-center py-8 text-xl font-semibold;
    font-family: var(--font-primary);
    caret-color: transparent;
  }
  
  /* ========================================================================
     LAYOUT SYSTEM
     ======================================================================== */
  
  /* Main Layout Containers */
  .app-container {
    @apply min-h-screen bg-purple-800/30;
  }
  
  .app-content {
    @apply pt-16;
  }
  
  .container-main {
    @apply container mx-auto px-4 py-8 min-h-screen;
  }
  
  .content-wrapper {
    @apply max-w-4xl mx-auto;
  }
  
  /* Task Layout Components */
  .tasks-container {
    @apply rounded-2xl p-6 shadow-lg bg-purple-300/30;
  }
  
  .tasks-content {
    @apply relative;
  }
  
  .tasks-content-disabled {
    @apply opacity-50 pointer-events-none;
  }
  
  .tasks-section {
    @apply space-y-3;
  }
  
  .tasks-section-completed {
    @apply space-y-3;
  }
  
  /* ========================================================================
     TASK COMPONENTS
     ======================================================================== */
  
  /* Task Item Base Styles - keeping original class names */
  .task-item-base {
    @apply flex items-center p-5 border border-purple-400 rounded-xl transition-all duration-300 ease-out;
  }
  
  .task-item-disabled {
    @apply bg-purple-300/60;
  }
  
  .task-item-editing {
    @apply bg-purple-300/60 border-purple-300 shadow-sm;
  }
  
  .task-item-interactive {
    @apply hover:bg-purple-300/60 hover:shadow-lg hover:border-purple-300 hover:scale-[1.02];
  }
  
  /* Task Content Structure */
  .task-content {
    @apply flex items-center gap-4 flex-1 select-none;
  }
  
  .task-checkbox {
    @apply w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 transition-all duration-200 ease-out;
  }
  
  .task-checkbox-disabled {
    @apply cursor-not-allowed;
  }
  
  .task-checkbox-interactive {
    @apply cursor-pointer hover:scale-110;
  }
  
  .task-title-area {
    @apply flex-1 py-2 -mx-2 px-2 rounded cursor-pointer min-w-0 max-w-full;
  }
  
  .task-title-area-disabled {
    @apply cursor-not-allowed;
  }
  
  .task-title-area-completed {
    @apply cursor-default;
  }
  
  .task-edit-area {
    @apply flex-1 bg-purple-200 flex items-center mr-2.5;
  }
  
  .task-delete-btn {
    @apply p-3 rounded-lg transition-colors;
  }
  
  .task-delete-btn-disabled {
    @apply text-gray-400 cursor-not-allowed;
  }
  
  .task-delete-btn-interactive {
    @apply text-gray-500 hover:text-red-500 hover:bg-purple-200 cursor-pointer;
  }
  
  /* ========================================================================
     SEARCH & FILTER COMPONENTS
     ======================================================================== */
  
  .search-container {
    @apply max-w-full ml-2 flex items-center relative;
  }

  .search-sort-row {
    @apply flex items-center justify-between gap-4;
  }

  .search-input-wrapper {
    @apply relative flex items-center max-w-2xl select-none;
  }

  .search-icon {
    @apply absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 z-10 pointer-events-none;
  }

  .search-input {
    @apply w-full py-3 pr-10 pl-12 border-2 border-purple-200 rounded-lg text-base transition-all duration-200 bg-purple-200 shadow-sm;
  }

  .search-input:focus {
    @apply outline-none border-purple-400 shadow-purple-400/10 shadow-lg;
  }

  .search-input:focus + .search-icon {
    @apply text-blue-500;
  }

  .search-input::placeholder {
    @apply text-gray-400;
  }

  .search-clear-btn {
    @apply absolute right-2 top-1/2 -translate-y-1/2 bg-none border-none text-gray-500 cursor-pointer p-1 rounded-full transition-all duration-200 flex items-center justify-center w-6 h-6;
  }

  .search-clear-btn:hover {
    @apply text-gray-700 bg-gray-100;
  }

  .search-clear-btn:focus {
    @apply outline-none text-gray-700 bg-gray-100;
  }

  .search-results-info {
    @apply text-left mt-2 p-0 absolute top-full left-0 right-0;
  }

  /* ========================================================================
     SORT COMPONENTS
     ======================================================================== */
  
  .sort-container {
    @apply flex justify-end;
  }

  .sort-options-container {
    @apply flex items-center gap-2 select-none mr-2;
  }

  .sort-label {
    @apply text-purple-900 text-base font-semibold;
    font-family: var(--font-primary);
  }

  .sort-dropdown {
    @apply px-4 py-3 border-2 border-purple-200 rounded-lg bg-purple-200 text-purple-900 text-base font-semibold focus:outline-none focus:border-purple-400 transition-colors shadow-sm;
    font-family: var(--font-primary);
  }

  /* ========================================================================
     DROPDOWN COMPONENTS
     ======================================================================== */
  
  .custom-dropdown {
    @apply relative;
  }

  .dropdown-selected {
    @apply cursor-pointer transition-colors focus:outline-none px-4 py-3 border-2 border-purple-200 rounded-lg bg-purple-200 text-purple-900 text-base font-semibold shadow-sm flex items-center justify-between min-w-[140px];
    font-family: var(--font-primary);
  }

  .dropdown-selected:hover {
    @apply border-purple-300 bg-purple-300;
  }

  .dropdown-arrow {
    @apply transition-transform duration-200 ml-2;
  }

  .arrow-up {
    @apply rotate-180;
  }

  .dropdown-options {
    @apply absolute top-full left-0 right-0 mt-0.5 bg-white border-2 border-purple-200 rounded-lg shadow-lg z-50 overflow-hidden;
  }

  .dropdown-option {
    @apply cursor-pointer transition-colors focus:outline-none px-4 py-3 text-purple-900 text-base font-semibold hover:bg-purple-100 border-b border-purple-100 last:border-b-0;
    font-family: var(--font-primary);
  }

  .dropdown-option:last-child {
    @apply border-b-0;
  }

  .option-selected {
    @apply bg-purple-200 text-purple-900;
  }

  .dropdown-option:hover {
    @apply bg-purple-100;
  }

  /* ========================================================================
     INTERACTION COMPONENTS
     ======================================================================== */
  
  /* Sound Toggle */
  .sound-toggle-container {
    @apply fixed bottom-6 right-6 z-50;
  }

  .sound-toggle-btn {
    @apply w-12 h-12 bg-purple-600/60 text-white rounded-full hover:bg-purple-700/75 focus:outline-none transition-colors flex items-center justify-center cursor-pointer;
    font-family: var(--font-primary);
  }

  .sound-toggle-btn.sound-enabled {
    @apply bg-purple-600/60 text-white;
  }

  .sound-toggle-btn:not(.sound-enabled) {
    @apply bg-gray-400 text-gray-600;
  }

  .sound-icon {
    @apply transition-all duration-200;
  }

  /* Sort Toggle */
  .sort-toggle-btn {
    @apply px-4 py-3 bg-purple-600/60 text-white rounded-full hover:bg-purple-700/75 focus:outline-none transition-colors shadow-sm flex items-center justify-center cursor-pointer;
    font-family: var(--font-primary);
  }

  /* ========================================================================
     FORM COMPONENTS
     ======================================================================== */
  
  /* Add Task Form */
  .add-task-container {
    @apply mb-6 cursor-pointer select-none;
  }
  
  .btn-add-task {
    @apply w-full p-4 border-2 border-dashed border-purple-800/50 rounded-xl text-gray-800 hover:border-purple-800 hover:text-purple-800 hover:bg-purple-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-semibold cursor-pointer;
    font-family: var(--font-primary);
  }
  
  .add-task-input-container {
    @apply border border-purple-300 rounded-xl p-4 pl-14 bg-purple-300/50 shadow-sm;
  }
  
  .input-task {
    @apply w-full border-none outline-none text-gray-800 placeholder-gray-400 bg-purple-300/50 disabled:opacity-50 text-lg font-medium;
    font-family: var(--font-primary);
  }
  
  .textarea-edit {
    @apply w-full text-xl outline-none text-gray-800 font-semibold resize-none overflow-hidden;
    font-family: var(--font-primary);
    min-height: 1.5rem;
    line-height: 1.5rem;
    vertical-align: middle;
    margin: 5px;
  }
  
  /* ========================================================================
     LOADING & FEEDBACK COMPONENTS
     ======================================================================== */
  
  .loading-container {
    @apply flex justify-center items-center py-12;
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600;
  }

  /* ========================================================================
     ANIMATION SYSTEM
     ======================================================================== */
  
  /* Task List Animations */
  .task-slide-enter-active,
  .task-slide-leave-active {
    transition: all var(--transition-bounce);
  }

  .task-slide-enter-from {
    opacity: 0;
    transform: translateX(-30px) scale(0.95);
  }

  .task-slide-leave-to {
    opacity: 0;
    transform: translateX(30px) scale(0.95);
  }

  .task-slide-move {
    transition: transform var(--transition-bounce);
  }

  /* Ensure smooth transitions for task items */
  .task-slide-enter-active .flex,
  .task-slide-leave-active .flex {
    transition: all var(--transition-bounce);
  }
  
  /* ========================================================================
     MODAL COMPONENTS
     ======================================================================== */
  
  .modal-backdrop {
    @apply fixed inset-0 z-50 flex items-center justify-center;
  }
  
  .modal-overlay {
    @apply absolute inset-0 bg-black/75;
  }
  
  .modal-container {
    @apply relative bg-purple-300 rounded-lg shadow-xl max-w-md w-full mx-4;
  }
  
  .modal-header {
    @apply px-6 py-4;
  }
  
  .modal-title {
    @apply text-lg font-semibold text-gray-900;
  }
  
  .modal-content {
    @apply px-6 py-4;
  }
  
  .modal-message {
    @apply text-gray-700 font-semibold;
  }
  
  .modal-actions {
    @apply px-6 py-4 rounded-b-lg flex justify-end gap-3;
  }
  
  .btn-modal-cancel {
    @apply px-4 py-2 text-sm font-medium text-gray-700 bg-purple-200 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors cursor-pointer;
  }
  
  .btn-modal-confirm {
    @apply px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors cursor-pointer;
  }

  /* ========================================================================
     ERROR & NOTIFICATION COMPONENTS
     ======================================================================== */
  
  .error-banner {
    @apply fixed top-0 left-0 right-0 z-50 bg-red-600 text-white px-4 py-3 shadow-lg;
  }
  
  .error-banner-content {
    @apply container mx-auto flex items-center justify-between;
  }
  
  .error-banner-message {
    @apply flex items-center font-medium;
  }
  
  .error-banner-icon {
    @apply w-5 h-5 mr-2;
  }
  
  .error-banner-close {
    @apply ml-4 text-white hover:text-red-200 focus:outline-none focus:text-red-200 transition-colors;
  }
  
  .error-banner-close-icon {
    @apply w-5 h-5;
  }
  
  /* ========================================================================
     LEGACY COMPONENTS (Maintained for backward compatibility)
     ======================================================================== */
  
  .btn-primary {
    @apply bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded;
  }
  
  .btn-secondary {
    @apply bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded;
  }
  
  .card {
    @apply bg-white shadow-md rounded-lg p-6;
  }
  
  .input {
    @apply border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500;
  }
}

/* ==========================================================================
   RESPONSIVE DESIGN & MOBILE-FIRST APPROACH
   ========================================================================== */

/* Mobile-first responsive breakpoints */
@media (max-width: 640px) {
  .container-main {
    @apply px-2 py-4;
  }
  
  .tasks-container {
    @apply p-4;
  }
  
  .task-item {
    @apply p-3;
  }
  
  .search-sort-row {
    @apply flex-col gap-2;
  }
  
  .sort-container {
    @apply justify-start;
  }
  
  .modal-container {
    @apply mx-2;
  }
}

@media (min-width: 641px) and (max-width: 1024px) {
  .container-main {
    @apply px-6;
  }
  
  .tasks-container {
    @apply p-5;
  }
}

@media (min-width: 1025px) {
  .container-main {
    @apply px-8;
  }
  
  .tasks-container {
    @apply p-6;
  }
}

/* ==========================================================================
   UTILITY CLASSES
   ========================================================================== */
@layer utilities {
  .no-caret {
    caret-color: transparent;
  }
  
  .text-wrap-anywhere {
    word-wrap: break-word;
    overflow-wrap: anywhere;
    word-break: break-word;
    hyphens: auto;
    max-width: 100%;
    display: block;
    white-space: pre-wrap;
  }
  
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  /* Accessibility utilities */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }
  
  /* Animation utilities */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  /* Additional utility classes used in components */
  .no-caret {
    caret-color: transparent;
  }
}

/* ==========================================================================
   KEYFRAME ANIMATIONS
   ========================================================================== */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
